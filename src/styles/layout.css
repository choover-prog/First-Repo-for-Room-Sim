:root {
  color-scheme: dark;
  --bg:#0f1115;
  --bg-panel:#151821;
  --fg:#e6e6e6;
  --line:rgba(255,255,255,0.08);
  --bottom-h: 56px;
}
body { background:var(--bg); color:var(--fg); margin:0; }
#app {
  display:grid;
  grid-template-rows:56px 1fr var(--bottom-h,56px);        /* header, middle, bottom bar */
  grid-template-columns:var(--left-width,280px) minmax(0,1fr) var(--right-width,320px);
  grid-template-areas:
    "hdr   hdr   hdr"
    "left  view  right"
    "left  bottom right";
  height:100vh; width:100vw; overflow:hidden;
}
#appHeader   { grid-area:hdr;   display:flex; align-items:center; justify-content:space-between;
  padding:0 12px; background:var(--bg-panel); border-bottom:1px solid var(--line); }
#panelLeft   { grid-area:left;   background:var(--bg-panel); border-right:1px solid var(--line); min-width:0; overflow:hidden; position:relative; }
#panelRight  { grid-area:right;  background:var(--bg-panel); border-left:1px solid var(--line); min-width:0; overflow:hidden; position:relative; }
#panelBottom { grid-area:bottom; background:var(--bg-panel); border-top:1px solid var(--line); min-height:0; overflow:hidden; position:relative; }
#view        { grid-area:view;   position:relative; min-width:0; min-height:0; }
#view canvas { position:absolute; inset:0; width:100%; height:100%; display:block; z-index:0; }

/* Panel chrome */
.panel__hdr  { position:sticky; top:0; height:44px; display:flex; align-items:center; justify-content:space-between;
  padding:0 10px; border-bottom:1px solid var(--line); background:var(--bg-panel); z-index:1; }
.panel__title { font-weight:600; font-size:14px; }
.panel__body { padding:10px; overflow:auto; height:calc(100% - 44px); }
.icon-btn, .panel__toggle {
  width:28px; height:28px; border:1px solid var(--line); border-radius:8px; background:transparent; color:var(--fg); cursor:pointer;
}
.panel__toggle::before { content:"â–¾"; display:block; text-align:center; transform:rotate(0deg); }
#panelLeft.is-collapsed   .panel__toggle::before { transform:rotate(-90deg); }
#panelRight.is-collapsed  .panel__toggle::before { transform:rotate(90deg); }
#panelBottom.is-collapsed .panel__toggle::before { transform:rotate(180deg); }

/* Resize handles */
.panel__resizer { position:absolute; background:var(--line); opacity:0; transition:opacity .2s; }
#panelLeft:hover  .panel__resizer,#panelRight:hover .panel__resizer,#panelBottom:hover .panel__resizer{opacity:1;}
#panelLeft .panel__resizer  { top:0; right:0; width:4px; height:100%; cursor:col-resize; }
#panelRight .panel__resizer { top:0; left:0;  width:4px; height:100%; cursor:col-resize; }
#panelBottom .panel__resizer{ top:0; left:0;  width:100%; height:4px; cursor:row-resize; }

/* Fullscreen hides side/bottom panels, expands center */
#app.is-fullscreen #panelLeft, #app.is-fullscreen #panelRight, #app.is-fullscreen #panelBottom { display:none; }
#app.is-fullscreen { grid-template-rows:56px 1fr 0; grid-template-columns:0 minmax(0,1fr) 0; }

/* Optional placeholder text style if region empty */
.region__placeholder { opacity:0.4; font-size:12px; padding:10px; }

.viewer-toolbar button.active { outline:2px solid #4da3ff; }

/* Bottom splitter overlay */
.splitter--bottom {
  grid-area: view;
  position: relative;
}
.splitter--bottom::after {
  content: "";
  position: absolute;
  left: 0; right: 0;
  bottom: calc(var(--bottom-h, 56px));
  height: 6px;
  cursor: ns-resize;
  z-index: 5;
  background: linear-gradient(to bottom, transparent 45%, rgba(255,255,255,0.08) 50%, transparent 55%);
}
#app.is-fullscreen .splitter--bottom::after { display:none; }
#panelBottom.is-collapsed + .splitter--bottom::after { display:none; }

:root {
  --left-w: 280px;
  --right-w: 320px;
  --bottom-h: 120px;
  --top-h: 56px;
}
#app {
  grid-template-rows: var(--top-h) 1fr var(--bottom-h);
  grid-template-columns: var(--left-w) minmax(0,1fr) var(--right-w);
  grid-template-areas:
    "hdr   hdr   hdr"
    "left  view  right"
    "left  bottom right";
}
#appHeader   { grid-area: hdr;   background:var(--bg-panel); border-bottom:1px solid var(--line); display:flex; align-items:center; justify-content:space-between; padding:0 12px; min-height:44px; }
#panelLeft   { grid-area: left;  background:var(--bg-panel); border-right:1px solid var(--line); min-width:0; overflow:hidden; }
#panelRight  { grid-area: right; background:var(--bg-panel); border-left:1px solid var(--line); min-width:0; overflow:hidden; }
#panelBottom { grid-area: bottom;background:var(--bg-panel); border-top:1px solid var(--line); min-height:0; overflow:hidden; }
#view        { grid-area: view;  position:relative; min-width:0; min-height:0; }
#view canvas { position:absolute; inset:0; width:100%; height:100%; display:block; z-index:0; }
.panel__hdr { position:sticky; top:0; height:44px; display:flex; align-items:center; justify-content:space-between; padding:0 10px; border-bottom:1px solid var(--line); background:var(--bg-panel); z-index:1; }
.panel__title { font-weight:600; font-size:14px; }
.panel__actions { display:flex; gap:6px; }
.panel__body { padding:10px; overflow:auto; height:calc(100% - 44px); }
.panel__collapse, .panel__fs, #btnFullscreen { width:28px; height:28px; border:1px solid var(--line); border-radius:8px; background:transparent; color:var(--fg); cursor:pointer; }
#panelLeft.is-collapsed   { width:0 !important; min-width:0; border-right:none; }
#panelRight.is-collapsed  { width:0 !important; min-width:0; border-left:none; }
#panelBottom.is-collapsed { height:44px; }
#appHeader.is-collapsed   { height:44px; overflow:hidden; }
#app.is-fullscreen #panelLeft, #app.is-fullscreen #panelRight, #app.is-fullscreen #panelBottom, #app.is-fullscreen #appHeader { display:none; }
#app.is-fullscreen { grid-template-rows:0 1fr 0; grid-template-columns:0 1fr 0; }
#app.fs-left   { grid-template-columns: 1fr 0 0;  grid-template-rows:0 1fr 0; }
#app.fs-right  { grid-template-columns: 0 0 1fr;  grid-template-rows:0 1fr 0; }
#app.fs-bottom { grid-template-columns: 0 1fr 0;  grid-template-rows:0 0 1fr; }
#app.fs-top    { grid-template-columns: 0 1fr 0;  grid-template-rows:1fr 0 0; }
#app.fs-view   { grid-template-columns: 0 1fr 0;  grid-template-rows:0 1fr 0; }
#app.fs-left   #panelRight, #app.fs-left   #panelBottom, #app.fs-left   #appHeader, #app.fs-left   #view { display:none; }
#app.fs-right  #panelLeft,  #app.fs-right  #panelBottom, #app.fs-right  #appHeader, #app.fs-right  #view { display:none; }
#app.fs-bottom #panelLeft,  #app.fs-bottom #panelRight,  #app.fs-bottom #appHeader, #app.fs-bottom #view { display:none; }
#app.fs-top    #panelLeft,  #app.fs-top    #panelRight,  #app.fs-top    #panelBottom, #app.fs-top  #view { display:none; }
#app.fs-view   #panelLeft,  #app.fs-view   #panelRight,  #app.fs-view   #panelBottom, #app.fs-view  #appHeader { display:none; }
.splitter-v { position:absolute; top:0; bottom:0; width:6px; cursor:ew-resize; z-index:5; }
.splitter-h { position:absolute; left:0; right:0; height:6px; cursor:ns-resize; z-index:5; }
#splitLeft  { right:-3px; }
#splitRight { left:-3px; }
#splitTop   { bottom:-3px; }
#splitBottom{ top:-3px; }
.splitter-v::before, .splitter-h::before { content:""; position:absolute; inset:0; background:linear-gradient(to bottom, transparent 45%, var(--line) 50%, transparent 55%); opacity:.7; }
.splitter-v::before { transform:rotate(90deg); }
.is-dragging * { cursor:grabbing !important; user-select:none !important; }
